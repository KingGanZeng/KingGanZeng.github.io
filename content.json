{"pages":[],"posts":[{"title":"Antlr4å…¥é—¨å­¦ä¹ -å®‰è£…é…ç½®ï¼ˆMacï¼‰","text":"æœ€è¿‘å¼€å§‹è¿›å…¥åˆ°æ¯•è®¾çš„å·¥ä½œä¸­ï¼Œç›®æ ‡æ˜¯å®Œæˆä¸€ä¸ªåŸºäºantlr4çš„é«˜çº§è®¡ç®—å™¨ï¼Œæœ¬æ–‡ä¸ºantlrçš„å…¥é—¨å®‰è£…æ•™ç¨‹ã€‚ Mac&amp;Linuxçš„é…ç½®è¯´æ˜é¦–å…ˆæ˜¯ä¸‹è½½ï¼Œè¿›å…¥åˆ°ç³»ç»Ÿé…ç½®ç›®å½•ä¸‹ï¼Œä½¿ç”¨curlå‘½ä»¤å¯¹æ–‡ä»¶è¿›è¡Œä¸‹è½½ï¼š 12knightdeMacBook-Pro-2:~ knight$ cd /usr/local/libknightdeMacBook-Pro-2:lib knight$ sudo curl -O https://www.antlr.org/download/antlr-4.7.1-complete.jar ä¸‹è½½å®Œæˆåï¼Œæ³¨æ„é‡å¯bashï¼Œåœ¨è¿™ä¸€è·¯å¾„ä¸‹è¿›è¡Œvimçš„æ“ä½œ 1knightdeMacBook-Pro-2:~ knight$ vim .bash_profile å½“ç„¶ä¹Ÿå¯ä»¥cd /Users/YourName æ¥è¿›è¡Œæ“ä½œ 123knightdeMacBook-Pro-2:lib knight$ cd /Users/KnightknightdeMacBook-Pro-2:Knight knight$ cd ~knightdeMacBook-Pro-2:~ knight$ vim .bash_profile ç„¶åè¿›å…¥åˆ°vimç¼–è¾‘å™¨ä¸­ï¼Œä¿®æ”¹è·¯å¾„å¹¶è®¾ç½®å¿«æ·åï¼ˆå¦‚æœå‡ºç°ä¸‹åˆ—æƒ…å†µï¼Œé€‰æ‹©edit anyway æˆ–è€…å…ˆ quit åå† editï¼‰ è¿›å…¥ä¹‹åç”±äºç°åœ¨vimå¤„äºå‘½ä»¤æ¨¡å¼ï¼Œä¸èƒ½å¯¹å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬è¾“å…¥iå³å¯ï¼ˆinsertæ¨¡å¼ï¼‰ 1234*export CLASSPATH=&quot;.:/usr/local/lib/antlr-4.0-complete.jar:$CLASSPATH&quot;alias antlr4=&apos;java -jar /usr/local/lib/antlr-4.0-complete.jar&apos;alias grun=&apos;java org.antlr.v4.runtime.misc.TestRig&apos; å¦‚ä¸‹å›¾ï¼š è¿™ä¸€æ­¥é…ç½®å®Œæˆåï¼ŒæŒ‰escåé€€å›åˆ°å‘½ä»¤æ¨¡å¼ï¼Œç„¶åè¾“å…¥qwï¼Œæ¥ç€è¾“å…¥ä¸¤ä¸ªå¤§å†™Zå³å¯ä¿å­˜é€€å‡ºã€‚ æ¥ä¸‹æ¥è¿è¡Œ 1knightdeMacBook-Pro-2:~ knight$ source .bash_profile source å‘½ä»¤æ˜¯ä¸ºäº†é‡æ–°æ‰§è¡Œåˆšä¿®æ”¹çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆï¼Œè€Œä¸å¿…æ³¨é”€å¹¶é‡æ–°ç™»å½•ã€‚è¿™æ—¶å€™antlrçš„ç³»ç»Ÿé…ç½®å·²ç»å®Œæˆäº†ã€‚ æˆ‘ä»¬è¾“å…¥antlr4æˆ–è€…grunå¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼š å…³é”®çš„æ“ä½œæ˜¯å¿«æ·é…ç½®è¿™ä¸€æ­¥ï¼Œä¹‹å‰æŒ‰ç…§å®˜ç½‘ç›´æ¥åœ¨usr/local/libä¸‹è¾“å…¥exportå¹¶ä¸èƒ½ä½¿å¾—é…ç½®ç”Ÿæ•ˆï¼Œå¯¼è‡´æ¯æ¬¡åœ¨é‡å¯é¡¹ç›®åéƒ½éœ€è¦é‡æ–°é…ç½®ï¼Œåæ¥æ‰å‘ç°æ˜¯å¯¼å…¥çš„ä½ç½®ä¸å¯¹ã€‚","link":"/Antlr4å…¥é—¨å­¦ä¹ -å®‰è£…é…ç½®/"},{"title":"Goè¯­è¨€å­¦ä¹ (ä¸‰)-åå°ç¯‡(åŸºäºbeegoæ¡†æ¶)","text":"Beegoæ¡†æ¶é™¤äº†å¯ä»¥æ‹¿æ¥åšwebåº”ç”¨å¼€å‘å¤–ï¼Œä¹Ÿé›†æˆäº†swaggeræ¥åšAPIè‡ªåŠ¨åŒ–æ–‡æ¡£å¼€å‘ï¼Œå› ä¸ºæœ€è¿‘åœ¨å­¦ä¹ åå°å¼€å‘ï¼Œæ­£å¥½å¥½å¥½æ’¸ä¸€æŠŠGoåå°ã€‚å› ä¸ºIrisè¿˜æ²¡æœ‰åšå¾ˆå¥½çš„æ–‡æ¡£é›†æˆï¼Œè¿™é‡Œå°±ä¸“æ³¨äºbeegoæ¡†æ¶ï¼Œä»æœ€ç®€å•çš„ç™»å½•æ³¨å†Œå¼€å§‹ã€‚ é¦–å…ˆæ˜¯æ•°æ®åº“å»ºè®¾ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨MySQLWorkbenchæ¥å»ºè¡¨ï¼Œå½“ç„¶æœ€ç®€å•çš„è¿˜æ˜¯sqlè¯­å¥ç”Ÿæˆï¼Œè¿™é‡Œæˆ‘ä»¬å»ºç«‹Userç”¨æˆ·è¡¨ï¼Œå…¶ä¸­åŒ…æ‹¬","link":"/Goè¯­è¨€å­¦ä¹ -åå°ç¯‡/"},{"title":"Goè¯­è¨€å­¦ä¹ (äºŒ)-æ¡†æ¶ç¯‡","text":"è™½ç„¶å·²ç»æ¥åˆ°äº†8102å¹´ï¼Œè·ç¦»Goè¯­è¨€å‘å¸ƒå·²ç»è¿‡å»äº†åå‡ å¹´ï¼Œä½†ä¸å¾—ä¸è¯´Goçš„æ¡†æ¶é€‰æ‹©è¿˜æ˜¯å¾ˆæœ‰é™çš„ï¼Œä½œä¸ºä¸€ä¸ªGoçš„åˆå­¦è€…ï¼Œå¯¹æ¡†æ¶é€‰æ‹©ä¸»è¦åœ¨ä»¥ä¸‹å‡ ç‚¹ï¼š 1ã€é«˜æ€§èƒ½ã€ä¸Šæ‰‹å¿« 2ã€æä¾›å®Œæ•´çš„MVCåŠŸèƒ½ 3ã€è¾ƒä¸ºå®Œå–„çš„æ–‡æ¡£ç¯å¢ƒå’Œè‰¯å¥½çš„issueç¯å¢ƒ 4ã€æŒç»­çš„ç»´æŠ¤æ›´æ–°æˆ–è€…å¤§ç¥å›¢é˜Ÿçš„å¼€å‘åŠ æˆ å‚è€ƒäº†ä¸€äº›æ–‡æ¡£åï¼Œæˆ‘é€‰æ‹©äº†å›½å†…å¤§ç¥å¼€å‘çš„beegoæ¡†æ¶ä»¥åŠå›½å¤–å¤§ç¥å›¢é˜Ÿå¼€å‘çš„Irisæ¡†æ¶ï¼š Beegoï¼šhttps://beego.me/ ï¼ˆbeegoçš„å®˜ç½‘è®¾è®¡è®©æˆ‘å›åˆ°äº†Dreamweaverå¼€å‘çš„æ—¶ä»£ï¼‰ Irisï¼šhttps://iris-go.com/ Irisä¸­æ–‡ç½‘ï¼šhttps://studyiris.com/ ï¼ˆèµä¸€ä¸ªï¼‰ å®‰è£…è¿‡ç¨‹å°±ä¸å¿…å¤šè¯´äº†ï¼ŒæŒ‰ç…§å®˜ç½‘è¯´æ˜æŒ‰éƒ¨å°±ç­æ¥å°±è¡Œï¼Œä½†æ˜¯æˆ‘å´é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚ æ³¨æ„ï¼šä»¥ä¸‹é—®é¢˜çš†ä¸º macOS 10.14.1 ç³»ç»Ÿï¼ŒGolangç‰ˆæœ¬ go1.11.2 darwin/amd64 çš„ç¯å¢ƒä¸‹ï¼Œå½“æ—¶å¯¹åº”çš„beegoç‰ˆæœ¬ä½1.10.0ï¼ŒIrisç‰ˆæœ¬ä¸ºå½“æ—¶æœ€æ–°ç‰ˆæœ¬ï¼ˆcommunity-driven version 11.1.0ï¼‰ Beegoçš„å®‰è£…é—®é¢˜ï¼š åœ¨æˆ‘æŒ‰ç…§å®˜ç½‘çš„è¯´æ˜å®‰è£…beegoå·¥å…·æ—¶ï¼Œå‘ç”Ÿäº†ä»¥ä¸‹é”™è¯¯ 12345678knightdeMacBook-Pro-2:~ knight$ go get github.com/beego/bee# github.com/beego/bee/vendor/github.com/derekparker/delve/procIn file included from go/src/github.com/beego/bee/vendor/github.com/derekparker/delve/proc/proc_darwin.go:3:./proc_darwin.h:1:10: fatal error: 'sys/types.h' file not found#include &lt;sys/types.h&gt; ^~~~~~~~~~~~~1 error generated.knightdeMacBook-Pro-2:~ knight$ å›½å†…çš„ç™¾åº¦å¯¹æ­¤é—®é¢˜æ— è§£ï¼Œæˆ‘åªèƒ½æ±‚åŠ©Googleï¼Œæœä¸å…¶ç„¶ä¹Ÿæœ‰äººå‘ç”Ÿäº†åŒæ ·çš„é—®é¢˜ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•æ›´æ–°å®‰è£…æˆ‘çš„xcode-installåï¼Œè¿˜æ˜¯æŠ¥å‡ºäº†ç›¸åŒçš„é”™è¯¯ï¼Œè¿™æ—¶å€™å°±è¦çœ‹issueçš„ä½œç”¨äº†ã€‚ ä¸å¾—ä¸è¯´beegoçš„issueç¯å¢ƒåšçš„ç›¸å½“æ£’ï¼Œåœ¨æˆ‘å‘å¸–æ²¡å¤šä¹…åï¼Œå°±æ”¶åˆ°äº†ä¸¤å°é‚®ä»¶ï¼š æŒ‰ç…§åè€…çš„æ“ä½œï¼Œé¡ºåˆ©çš„å®Œæˆäº†beegoçš„å®‰è£…ï¼Œä¸è¿‡çœ‹èµ·æ¥è¿™ç§æƒ…å†µæ˜¯å¾ˆå°‘çš„ï¼Œè€Œä¸”ä»…é’ˆå¯¹ä¸macOSã€‚ å…³äºå¦‚ä½•åœ¨macOSä¸­å¿«é€Ÿè¿›å…¥åˆ°æ–‡ä»¶å¤¹ï¼ˆæˆ–éšè—æ–‡ä»¶å¤¹ï¼‰ä¸­ï¼Œè¯·å…ˆç‚¹å‡»è®¿è¾¾åº”ç”¨-&gt;èœå•æ â€œå‰å¾€â€-&gt;å‰å¾€æ–‡ä»¶å¤¹-&gt;è¾“å…¥ç»å¯¹è·¯å¾„ï¼Œå¦‚è¿™é‡Œçš„ /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg ã€‚Irisçš„å®‰è£…é—®é¢˜ï¼š æ¯•ç«Ÿæ˜¯å›½å¤–çš„æ¡†æ¶ï¼Œè‡ªå·±ç”¨å­¦æ ¡çš„ç½‘å±…ç„¶é‡åˆ°äº†å®‰è£…ä¸ä¸Šçš„æƒ…å†µï¼Œå»ºè®®å¤§å®¶åœ¨å®‰è£…å‘½ä»¤æ—¶è¾“å…¥ï¼š 1knightdeMacBook-Pro-2:~ knight$ go get -v -u github.com/kataras/iris è¿™æ ·å¯ä»¥æ–¹ä¾¿æŸ¥çœ‹ä¸‹è½½å®‰è£…è¿›åº¦ï¼Œä¸ä¼šå‡ºç°è®©äººæ„Ÿè§‰ä¸‹è½½ä¸äº†çš„é”™è§‰ã€‚","link":"/Goè¯­è¨€å­¦ä¹ -æ¡†æ¶ç¯‡/"},{"title":"Django Rest Frameworkè°ƒè¯•ä¹‹å‘","text":"åŸæ¥æƒ³è®©è‡ªå·±é€šè¿‡é¡¹ç›®çš„æ–¹å¼å­¦ä¹ å­¦ä¹ Djangoè¿™ä¸€æ¡†æ¶ï¼Œç»“æœæ‹–å»¶ç—‡çš„æˆ‘åˆ°æœ€åå¼€å§‹æ‰åšèµ·æ¥ï¼Œæ²¡æƒ³åˆ°çœŸæ˜¯ç»™è‡ªå·±æŒ–å¤§å‘ï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹é¡¹ç›®è¿›å±•è¿‡ç¨‹çš„ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚ è®¾ç½®éå¿…å¡«é¡¹ é€šè¿‡modelå®šä¹‰çš„å­—æ®µä¸€èˆ¬éƒ½æ˜¯å¿…å¡«çš„ï¼Œå¦‚æœå…è®¸ä¸ºç©ºçš„è¯éœ€è¦è‡ªå·±è®¾ç½®å±æ€§ï¼Œä¾‹å¦‚ï¼š 123class User(models.Model): uid = models.CharFields(max_length=30, blank=True) weight = models.DecimalField(max_digits=9, decimal_places=2, null=True, blank=True) éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¯¹äºæ—¶é—´å’Œè¾“å…¥ï¼Œå…è®¸ä¸ºç©ºçš„æ¡ä»¶éœ€è¦123456789101112132. def \\__str__(self)çš„å…¼å®¹ å…³äºè¯¥å‡½æ•°ï¼Œåœ¨python2å’Œ3ä¸‹æœ‰ä¸åŒçš„ä¹¦å†™æ–¹å¼ï¼Œéœ€è¦æ³¨æ„ï¼Œå¦åˆ™ä¼šæŠ¥é”™: ```python def __str__(self): # python3å†™æ³• return self.record_id # python2å†™æ³• return self.record_id.encode(&quot;utf-8&quot;) # é€šç”¨å†™æ³• return str(self.record_id) æŠ¥é”™ä¿¡æ¯ï¼š TypeError: __str__returned non-string (type bytes)","link":"/Django Rest Frameworkè°ƒè¯•ä¹‹å‘/"},{"title":"Goè¯­è¨€å­¦ä¹ (ä¸€)-å®‰è£…ç¯‡ï¼ˆMacï¼‰","text":"Go è¯­è¨€è¢«è®¾è®¡æˆä¸€é—¨åº”ç”¨äºæ­è½½ Web æœåŠ¡å™¨ï¼Œå­˜å‚¨é›†ç¾¤æˆ–ç±»ä¼¼ç”¨é€”çš„å·¨å‹ä¸­å¤®æœåŠ¡å™¨çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚ Goå®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://golang.org/ Goä¸­æ–‡å®˜æ–¹ç¿»è¯‘ç‰ˆï¼šhttp://docscn.studygolang.com/ Macé…ç½®è¯´æ˜ åœ¨å®˜ç½‘è¿›å…¥ä¸‹è½½é¡µé¢åï¼Œé€‰æ‹©Apple macOSè¿›è¡Œä¸‹è½½ï¼š ä¸‹è½½å®Œæˆåè¿›è¡Œä¸€ç³»åˆ—â€œä¸‹ä¸€æ­¥â€å®‰è£…å³å¯ï¼Œå®˜ç½‘ç»™å‡ºçš„è¯´æ˜æ˜¯ï¼š ç›¸å½“äºæ˜¯å®˜æ–¹è‡ªåŠ¨å¸®æˆ‘ä»¬åšäº†ä¸€äº›å®‰è£…çš„æ“ä½œï¼Œä¸éœ€è¦åœ¨æ‰‹åŠ¨å»ºç«‹Goçš„ç›®å½•æ ‘äº†ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿™ç±»ä»ç„¶éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é…ç½®GOPATHã€GOBINç­‰ç¯å¢ƒå˜é‡ã€‚ å®Œæˆä¸Šè¿°æ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»ˆç«¯æ¥æŸ¥çœ‹goçš„ä¸€äº›ä¿¡æ¯ï¼š 12knightdeMacBook-Pro-2:~ knight$ go versionknightdeMacBook-Pro-2:~ knight$ go env å¯ä»¥çœ‹åˆ°æˆ‘çš„ç‰ˆæœ¬å·ä¸º1.11.2ï¼Œgoçš„ä¸€äº›å¼€å‘å˜é‡ä¹Ÿæœ‰ï¼Œè¿™é‡Œéœ€è¦å…³æ³¨çš„æ˜¯ç”»çº¢çº¿çš„ä¸¤ä¸ªå˜é‡ï¼Œè¿™é‡Œå› ä¸ºæˆ‘å·²ç»é…ç½®å¥½äº†ï¼Œæ‰€ä»¥éƒ½æœ‰æ˜¾ç¤ºã€‚æ­£å¸¸åœ¨åšå®Œä¸Šè¿°æ­¥éª¤ä¹‹åï¼ŒGOBINåº”è¯¥ä¸ºç©ºï¼ŒGOPATHä¼šæ˜¯â€™ Users/ä½ çš„ç”¨æˆ·å/go â€˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥é…ç½®éœ€è¦çš„ç¯å¢ƒå˜é‡ã€‚ åœ¨ç»ˆç«¯ä¸­è¾“å…¥ï¼š 12knightdeMacBook-Pro-2:Downloads knight$ cd ~knightdeMacBook-Pro-2:Downloads knight$ vim .bash_profile æŒ‰ä¸‹ e è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå†æŒ‰ä¸‹ i è¿›å…¥åˆ°æ’å…¥æ¨¡å¼ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹é…ç½®ï¼š 123export GOPATH=/Users/knight/goexport GOBIN=$GOPATH/binexport PATH=$PATH:${GOPATH//://bin:}/bin GOPATHå°±æ˜¯ä¹‹å‰goå®‰è£…æ˜¯è‡ªåŠ¨å¸®ä½ ç”Ÿæˆçš„æ–‡ä»¶å¤¹ï¼Œç„¶åæŒ‰ä¸‹escï¼Œå†è¾“å…¥qwï¼Œæœ€åè¾“å…¥ä¸¤ä¸ªå¤§å†™ Z å®Œæˆç¼–è¾‘ï¼Œæ¥ç€è¾“å…¥: 1knightdeMacBook-Pro-2:~ knight$ source .bash_profile è¿™æ¡å‘½ä»¤å¯ä»¥è®©æˆ‘ä»¬çš„ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆï¼Œè€Œä¸éœ€è¦æ³¨é”€ç”¨æˆ·æ‰èƒ½ç”Ÿæ•ˆã€‚ æ­¤æ—¶å†å»æŸ¥çœ‹go envï¼Œå¯ä»¥å‘ç°ç¯å¢ƒå˜é‡éƒ½å·²ç»é…ç½®å®Œæˆã€‚ ç„¶åé€šè¿‡æ„å»ºä¸€ä¸ªç®€å•çš„ç¨‹åºæ¥æ£€æŸ¥Goçš„å®‰è£…æ˜¯å¦æ­£ç¡®ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š é¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸º hello.go çš„æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç ä¿å­˜åœ¨å…¶ä¸­ï¼š 1234567package mainimport &quot;fmt&quot;func main() { fmt.Printf(&quot;hello, world\\n&quot;)} æ¥ç€é€šè¿‡ go å·¥å…·è¿è¡Œå®ƒï¼š 12$ go run hello.gohello, world è‹¥ä½ çœ‹åˆ°äº†â€œhello, worldâ€ä¿¡æ¯ï¼Œé‚£ä¹ˆä½ çš„Goå·²è¢«æ­£ç¡®å®‰è£…ã€‚ å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/dev_csdn/article/details/78740990","link":"/Goè¯­è¨€å­¦ä¹ -å®‰è£…ç¯‡/"},{"title":"è§£å†³vue watchä¸­removeEventListener()ä¸ç”Ÿæ•ˆçš„é—®é¢˜","text":"æœ€è¿‘åœ¨åšvueé¡¹ç›®ï¼Œé‡åˆ°äº†ä¸€ä¸ªäº‹ä»¶ç»‘å®šçš„å°é—®é¢˜ï¼Œå½“æˆ‘watchæŸä¸€ä¸ªdataå€¼çš„å˜åŒ–æ—¶ï¼Œéœ€è¦å¯¹æŸä¸€ä¸ªèŠ‚ç‚¹ç»‘å®šäº‹ä»¶ï¼ˆå…ˆè§£ç»‘å†ç»‘å®šï¼Œé˜²æ­¢é‡å¤ç»‘å®šï¼‰ï¼Œå¯ä»¥æ¥çœ‹ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132...data() { return { quickSelect: '', inputValue: '' }},watch: { inputValue: { handler() { const datePickerPanel = document.querySelector('.date-picker__panel') const _this = this // é—­åŒ…å–ä¸åˆ°vueå®ä¾‹ï¼Œæ‰€ä»¥è¦åœ¨è¿™é‡Œé‡æ–°å®šä¹‰ const clearQuickSelect = function () { console.log(1111) _this.quickSelect = '' } // é˜²æ­¢é‡å¤ç›‘å¬ï¼Œå…ˆç§»é™¤ä¹‹å‰çš„ datePickerPanel.removeEventListener('click', clearQuickSelect, false) datePickerPanel.addEventListener('click', clearQuickSelect, false) // è§¦å‘panelåˆ·æ–°å‡½æ•° this.refreshPanel() } }},methods: { refreshPanel() { ... this.quickSelect = 'xxx' ... }}... æˆ‘åœ¨watchä¸­å»å£°æ˜äº†ä¸€ä¸ªclearQuickSelectå‡½æ•°ï¼Œé‡ç½®quickSelectè¿™ä¸ªå±æ€§ï¼Œä¹ä¸€çœ‹addå’Œremoveçš„å‚æ•°å®Œå…¨ä¸€è‡´ï¼Œåœ¨å®é™…æ“ä½œä¸­å‘ç°removeå¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼ŒåŸå› æ˜¯å•¥å‘¢ï¼Œæˆ‘è¿˜å‚»ä¹ä¹çš„ç”¨ç®­å¤´å‡½æ•°è¯•äº†ä¸€ä¸‹ï¼Œä¾ç„¶è¿˜æ˜¯æ— æ³•removeã€‚ å…¶å®ä¸»è¦é—®é¢˜åœ¨äºï¼Œæ¯æ¬¡è§¦å‘watchï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„clearQuickSelectå‡½æ•°ï¼Œå³ä¾¿åå­—ä¸€æ ·ï¼Œå®ƒæ‰€å­˜æ”¾çš„åœ°å€ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œå®é™…ä¸Šæ¯æ¬¡removeçš„clearQuickSelectéƒ½æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”Ÿæˆäº†clearQuickSelect1() clearQuickSelect2() clearQuickSelect3()ï¼Œå¯¼è‡´è§£ç»‘ä¸åˆ°ä¹‹å‰å®šä¹‰çš„å‡½æ•°ã€‚ ä¸€ä¸ªè§£å†³åŠæ³•å°±æ˜¯å°†clearQuickSelectæ”¾åœ¨methodsé‡Œï¼Œè¿™æ ·ä¸€è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼ŒäºŒä¹Ÿä¸éœ€è¦è€ƒè™‘é—­åŒ…å–ä¸åˆ°æ­£ç¡®çš„thisçš„é—®é¢˜ã€‚ è¯´é“è¿™é‡Œä¸å¦‚æ¥å›é¡¾ä¸€ä¸‹ä»åŸç”Ÿåˆ°jqueryå†åˆ°ç›®å‰ä¸»æµæ¡†æ¶çš„äº‹ä»¶ç»‘å®šæ–¹æ³•å§ æ¡†æ¶ äº‹ä»¶ åŸç”Ÿjs addEventListener(event, function, useCapture), removeEventListener(event, function, useCapture) jquery $(domSelector).on(event, childSelector, data, function), $(domSelector).off(â€˜clickâ€™) vue åœ¨domä¸Šç»‘å®š@click=â€func()â€æˆ–ä½¿ç”¨åŸç”Ÿ react åœ¨domä¸Šç»‘å®šonClick=â€func()â€æˆ–ä½¿ç”¨åŸç”Ÿ PS: åŸç”Ÿäº‹ä»¶ä¸­useCaptureä¸ºtrueåˆ™è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè§¦å‘ï¼Œå¦åˆ™ä¸ºå†’æ³¡ã€‚é»˜è®¤ä¸ºäº‹ä»¶å†’æ³¡ã€‚ æœ€è¿‘é¢è¯•ä¹Ÿè¢«é—®åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•ä½¿ç”¨åŸç”Ÿäº‹ä»¶å®ç°jqueryçš„onï¼Œç®€å•æƒ³äº†ä¸€ç§å†™æ³•ï¼š 123456789101112131415&lt;div id=\"father\"&gt; &lt;div class=\"child\"&gt;&lt;/div&gt; &lt;div class=\"child\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt; // jqueryçš„å†™æ³• $('#father').on('click', '.child', function () {console.log(111111)} ) // ç”¨åŸç”Ÿå®ç° const father = document.getElementById('father') father.addEventListener('click', function(e) { if (e &amp;&amp; e.target.className = 'child') { console.log(222222) } })&lt;/script&gt;","link":"/addEventListener()ä¸removeEventListener()/"},{"title":"Koaè·¯ç”±å’Œé™æ€èµ„æºä¸­é—´ä»¶åˆæ¢","text":"Koaä½œä¸ºç›®å‰æœ€ä¸ºè½»å·§çš„nodejsæ¡†æ¶ï¼Œæ­å»ºSPAï¼ˆå•é¡µé¢åº”ç”¨ï¼‰å¯ä»¥è¯´æ˜¯å¾—å¿ƒåº”æ‰‹ï¼Œé‚£ä¹ˆä»Šå¤©å°±æ¥ç®€å•å…¥ä¸€ä¸‹Koaè¿™ä¸ªæ·±å‘ï¼Œä¸»è¦æ˜¯æ€»ç»“è·¯ç”±çš„ä½¿ç”¨ï¼ˆç”¨äºé¡µé¢åˆ‡æ¢ï¼‰ä»¥åŠé™æ€èµ„æºçš„åŠ è½½ï¼Œä¸¤è€…éƒ½æ˜¯åŸºäºkoaçš„ä¸­é—´ä»¶ã€‚ ä¸€ã€é¡¹ç›®è¿è¡Œç¯å¢ƒï¼šâ€‹ phpstorm 2018.1ç‰ˆæœ¬ â€‹ nodejs 8.11.1ç‰ˆæœ¬ äºŒã€é¡¹ç›®æ¡†æ¶æ­å»ºï¼šâ€‹ é¦–å…ˆæˆ‘ä»¬ç°åœ¨phpstromåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œç„¶ååœ¨ç¼–è¯‘å™¨ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥: 1npm i koa â€‹ ç­‰å¾…koaæ¡†æ¶åˆ›å»ºå¥½åï¼Œç»§ç»­åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š 1npm init è¿™ä¸€æ­¥ä¸»è¦æ˜¯ç”Ÿæˆåˆå§‹çš„é…ç½®è¡¨ï¼Œä¸€ç›´æ•²å›è½¦å°±å¯ä»¥ï¼Œè¿™æ­¥æ“ä½œç»“æŸåæˆ‘ä»¬å¯ä»¥åœ¨package.jsonä¸­æŸ¥çœ‹åˆ°æœ¬é¡¹ç›®çš„é…ç½®è¡¨ï¼š æ¥ä¸‹æ¥æˆ‘ä»¬è¦å®‰è£…ä¸¤ä¸ªä¸­é—´ä»¶ï¼škoa-routeå’Œkoa-staticï¼Œåˆ†åˆ«ä¸ºkoaå°è£…å¥½çš„è·¯ç”±ä»¥åŠé™æ€æ–‡ä»¶åŠ è½½çš„æ’ä»¶ï¼š 123npm install --save koa-route...npm install --save koa-static å†å»æŸ¥çœ‹ä¸€ä¸‹package.jsonæ–‡ä»¶ï¼Œä¸­é—´ä»¶å·²ç»åŠ è½½å¥½äº†ï¼š åŸºæœ¬çš„é…ç½®æ­å»ºå®Œæ¯•ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸€äº›ç®€å•çš„åº”ç”¨ã€‚ ä¸‰ã€é¡¹ç›®ä¸»ä½“ä»£ç ï¼šé¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æŒ‰ç…§è¿™ä¸ªç›®å½•æ ‘è¿›è¡Œåˆ›å»º(node_modulesæ–‡ä»¶å¤¹é‡Œé¢ä¸œè¥¿å¤ªå¤šï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸æ”¾å‡ºæ¥äº†)ï¼š ï¼ˆTipsï¼šMacå¯ä»¥é€šè¿‡brew install treeå®‰è£…ç”Ÿæˆç›®å½•æ ‘çš„æŒ‡ä»¤ï¼Œç„¶åè¿›å…¥åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åœ¨ç»ˆç«¯è¾“å…¥treeæ¥ç”Ÿæˆç›®å½•æ ‘ï¼ŒWindowså¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥treeæ¥ç”Ÿæˆï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼šå‘½ä»¤è¡Œtreeå‘½ä»¤ç”Ÿæˆæ–‡ä»¶æ ‘ï¼‰ å…¶ä¸­viewæ–‡ä»¶å¤¹ä¸»è¦å­˜æ”¾æˆ‘ä»¬çš„htmlé¡µé¢ï¼Œpublicä½œä¸ºå…¬å…±æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾cssä»¥åŠjsæ–‡ä»¶ï¼Œæ¥ä¸‹æ¥é¦–å…ˆç¼–è¾‘app.jsæ–‡ä»¶è¿›è¡Œé…ç½®ï¼š 12345678910111213141516171819202122232425'use strict'const koa = require('koa');const route = require('koa-route');const fs = require('fs');const app = new koa();//å®šä¹‰é™æ€èµ„æºæ–‡ä»¶å¤¹app.use(require('koa-static')(__dirname + '/public'));//ä¸ºä¸åŒè·¯ç”±è®¾ç½®ä¸åŒå“åº”const main = ctx =&gt; { ctx.response.type = 'html'; ctx.response.body = fs.createReadStream('./view/index.html');};const about = ctx =&gt; { ctx.response.type = 'html'; ctx.response.body = fs.createReadStream('./view/about.html');};//å®šä¹‰è·¯ç”±å“åº”,æ ¹ç›®å½•ä¸‹æ˜¾ç¤ºâ€œä¸»é¡µâ€,aboutç›®å½•ä¸‹æ˜¾ç¤ºâ€œå…³äºé¡µâ€app.use(route.get('/', main));app.use(route.get('/about',about));app.listen(3300);console.log(\"ç›‘å¬æˆåŠŸï¼Œç«¯å£å·ä¸º3300\"); csså’Œjsæ–‡ä»¶è¿™é‡Œå°±ä¸æ”¾å‡ºäº†ï¼Œå¤§å®¶æŒ‰ç…§æ­£å¸¸çš„å†™æ³•æ¥å†™å°±å¥½ï¼Œè€Œå¯¹äºhtmlæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬è¦æŠŠcsså’Œjså…³è”è¿›å»ï¼Œè¿™é‡Œè¦æ³¨æ„å…³è”è·¯å¾„çš„å†™æ³•ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;index&lt;/title&gt; &lt;!-- æ³¨æ„è·¯å¾„çš„å†™æ³• --&gt; &lt;link rel=\"stylesheet\" href=\"css/index.css\"&gt; &lt;script src=\"js/jquery.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;ol id=\"data\"&gt; &lt;li value=\"0\"&gt; é€‰é¡¹1 &lt;ul class=\"hide\" id=\"data_one\"&gt; &lt;li&gt;å­é€‰é¡¹11&lt;/li&gt; &lt;li&gt;å­é€‰é¡¹12&lt;/li&gt; &lt;li&gt;å­é€‰é¡¹13&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li value=\"2\"&gt; é€‰é¡¹2 &lt;ul class=\"hide\" id=\"data_two\"&gt; &lt;li&gt;å­é€‰é¡¹21&lt;/li&gt; &lt;li&gt;å­é€‰é¡¹22&lt;/li&gt; &lt;li&gt;å­é€‰é¡¹23&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li value=\"4\"&gt; é€‰é¡¹3 &lt;ul class=\"hide\" id=\"data_three\"&gt; &lt;li&gt;å­é€‰é¡¹31&lt;/li&gt; &lt;li&gt;å­é€‰é¡¹32&lt;/li&gt; &lt;li&gt;å­é€‰é¡¹33&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;script&gt;&lt;/script&gt;&lt;/html&gt; æœ¬æ¥æ­£å¸¸çš„å†™æ³•åº”è¯¥æ˜¯ 12&lt;link rel=\"stylesheet\" href=\"../public/css/index.css\"&gt;&lt;script src=\"../public/js/jquery.js\"&gt;&lt;/script&gt; å› ä¸ºæˆ‘ä»¬å¼•å…¥äº†koaçš„é™æ€èµ„æºæ’ä»¶ï¼Œè¿™é‡Œå§æŠŠpublicä½œä¸ºé»˜è®¤çš„åŠ è½½è·¯å¾„ï¼Œå› æ­¤å¯ä»¥çœç•¥ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨app.jsä¸­è‡ªå®šä¹‰è·¯å¾„ï¼ŒæŠŠpublicæ¢æˆä½ çš„è·¯å¾„å³å¯ï¼š 123...app.use(require('koa-static')(__dirname + '/public'));... å››ã€è¿è¡Œç»“æœï¼šè¿è¡Œapp.jsæ–‡ä»¶ï¼Œæ§åˆ¶å°ä¼šè¾“å‡º: ç„¶åæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥ http://localhost:3300/ å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç•Œé¢ï¼š è¿™æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ ¹ç›®å½•è®¿é—®æ‰€æ˜¾ç¤ºçš„ç•Œé¢ï¼Œæ¥ä¸‹æ¥æ›´æ”¹åœ°å€æ ä¸º http://localhost:3300/about ï¼Œè¿™æ˜¯æˆ‘ä»¬å®šä¹‰å¥½çš„è·¯ç”±è®¿é—®é¡µé¢ï¼š è‡³æ­¤ï¼Œæˆ‘ä»¬è¿™ä¸ªå°çš„demoå°±ç»“æŸäº†ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªå·±å°è¯•å¤šå»ºç«‹å‡ ä¸ªé¡µé¢ï¼Œä½†è¿™æ ·å¯¹äºå£°æ˜æ¥è¯´æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœé‡‡ç”¨æ¨¡æ¿éƒ¨ç½²ï¼Œå¯ä»¥å‡å°‘é¡µé¢çš„åŠ è½½ï¼ŒåŒæ—¶æé«˜é¡µé¢çš„æ€§èƒ½ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å‚é˜…jqueryçš„templateæ–‡æ¡£æ¥æ­å»ºæ›´é«˜æ•ˆçš„SPAã€‚","link":"/Koaè·¯ç”±å’Œé™æ€èµ„æºä¸­é—´ä»¶åˆæ¢/"},{"title":"node.jséç®¡é“æ–¹æ³•è¯»å†™é”™è¯¯é—®é¢˜","text":"ä»Šå¤©åœ¨å­¦ä¹ node.jsæµçš„æ—¶å€™ï¼Œå‚ç…§èœé¸Ÿæ•™ç¨‹çš„æ–‡æ¡£å†™äº†ä»æµä¸­è¯»å–å’Œå†™å…¥æ•°æ®çš„æ“ä½œï¼Œä½†æ˜¯åœ¨ä¸¤è€…åŒæ—¶è¿è¡Œçš„æ—¶å€™ï¼Œå´å‘ç°å†™å…¥æ–‡æ¡£å¹¶æ²¡æœ‰ä»»ä½•æ•°æ®å†™å…¥ã€‚ å…ˆä¸Šæœ€åˆçš„é”™è¯¯ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031//å¼•å…¥æµæ¨¡å—var fs = require('fs');var data = '';var readerStream = fs.createReadStream('input.txt');var writerStream = fs.createWriteStream('output.txt'); //å°†æ–‡æ¡£ä»input.txtä¸­è¯»å–å‡ºæ¥å­˜å…¥æµreaderStream.on('data', function(chunk){ console.log(\"1ã€Start:\"); data += chunk;});readerStream.on('end', function(){ console.log(\"2ã€\" + data);});readerStream.on('error', function(err){ console.log(err.stack);})ï¼›//ä»æµä¸­è¯»å–æ•°æ®å†™å…¥output.txtwriterStream.write(data, 'UTF8');writerStream.end();writerStream.on('finish', function(){ console.log(\"3ã€Write done!\"); console.log(\"4ã€All done!\");});writerStream.on('err', function(err){ console.log(err.stack);});console.log(\"5ã€Program Finishedï¼\"); 1Hello world! ç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 123455ã€Program Finished!1ã€Start:3ã€Write done!4ã€All done!2ã€Hello world! è¿™æ—¶å»æŸ¥çœ‹åŒç›®å½•ä¸‹ç”Ÿæˆçš„output.txtæ˜¯æ²¡æœ‰å†…å®¹çš„ï¼Œæ ¹æ®ä»¥ä¸Šä»£ç ï¼Œæ˜¾ç„¶åœ¨è¿›è¡Œå†™å…¥æ“ä½œæ—¶ï¼Œdataå˜é‡è¿˜æ²¡æœ‰æ•°æ®è¯»å…¥ï¼Œå› æ­¤outputå†™å…¥æ•°æ®ä¸ºç©ºï¼ˆä½ ä¹Ÿå¯ä»¥å°è¯•å®šä¹‰dataä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæµ‹è¯•ï¼‰ã€‚ æ¥ä¸‹æ¥å¯¹å†™å…¥æµï¼ˆwriterStreamï¼‰è®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œ1ç§’åè¿›è¡Œæ“ä½œï¼Œä¿®æ”¹ä»£ç ä¸ºï¼š 12345678...setTimeout(function(){ writerStream.write(data, 'UTF8');},1000);setTimeout(function(){ writeStream.end();},2000)... è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œåœ¨å¯¹å†™æ“ä½œè®¾ç½®å®šæ—¶å™¨çš„æ—¶å€™ï¼Œéœ€è¦å¯¹endæ–¹æ³•ä¹Ÿè®¾å®šå®šæ—¶å™¨ï¼Œå¹¶ä¸”æ—¶é—´éœ€è¦å¤§äºæˆ‘ä»¬å†™æ“ä½œå®šæ—¶å™¨çš„æ—¶é—´ï¼Œä¸ç„¶ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š 12Error: write after end... æœ€ç»ˆè°ƒè¯•åˆ°ä»¥ä¸‹é˜¶æ®µï¼š 123456789...setTimeout(function(){ writerStream.write(data, 'UTF8');},3);//å®šæ—¶ä¸º2åˆ™æŠ›å‡º'Error: write after end'setTimeout(function(){ writeStream.end();},5)... å¯ä»¥çœ‹åˆ°ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®è‡³å°‘è¦3msï¼ˆå®é™…çš„è¯»å–æ—¶é—´è·Ÿæ–‡ä»¶è·¯å¾„ä»¥åŠå¤§å°æœ‰å…³ï¼‰ï¼Œè€Œç¨‹åºè¯»å–å®Œåªéœ€è¦ä¸åˆ°1msï¼Œæ‰€ä»¥æ‰å‡ºç°äº†æœ€å¼€å§‹å†™å…¥æ•°æ®ä¸ºç©ºçš„bugã€‚è¿™ä¹Ÿä¾§é¢è¯´æ˜äº†node.jsçš„å¼‚æ­¥å¤„ç†æ–¹å¼ã€‚ å½“ç„¶ï¼Œå…¶å®node.jså·²ç»å¸®æˆ‘ä»¬åšå¥½äº†è¿™ä¸€å †ç¹æ‚çš„æ“ä½œï¼Œç®¡é“æµï¼ˆpipeï¼‰å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„ä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š 1234567var fs = require('fs');var readerStream = fs.createReadStream('input.txt');var writeeStream = fs.createWriteStream('output.txt');readerStream.pipe(writeStream);console.log(\"All done!\"); ä¸Šè¿°çš„æ“ä½œä¼šä½¿å¾—output.txtå†…å®¹è¢«è¦†å†™ï¼Œå¦‚æœä½ åªæƒ³åœ¨output.txtä¸­è¿½åŠ å†…å®¹ï¼Œå¯ä»¥åœ¨å®šä¹‰å†™å…¥æµçš„æ—¶å€™è¿½åŠ å‚æ•°: 1var writeeStream = fs.createWriteStream('output.txt',{'flags' : 'a' }); å¯ç”¨çš„å‚æ•°åˆ—è¡¨å¦‚ä¸‹ï¼š flag è¯´æ˜ r è¯»å–æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ r+ è¯»å–å¹¶å†™å…¥ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨æ—¶æŠ›å‡ºå¼‚å¸¸ rs ä»¥åŒæ­¥æ–¹å¼è¯»å–æ–‡ä»¶å¹¶é€šçŸ¥æ“ä½œç³»ç»Ÿå¿½ç•¥æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ w å†™å…¥æ–‡ä»¶ã€‚æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œå­˜åœ¨åˆ™æ¸…ç©ºæ–‡ä»¶å†…å®¹ w+ è¯»å–å¹¶å†™å…¥æ–‡ä»¶ã€‚æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œå­˜åœ¨åˆ™æ¸…ç©ºæ–‡ä»¶å†…å®¹ wx ä½œç”¨ä¸â€wâ€ç±»ä¼¼ã€‚ä½†ä»¥æ’ä»–æ–¹å¼æ‰“å¼€æ–‡ä»¶ wx+ ä½œç”¨ä¸â€w+â€ç±»ä¼¼ã€‚ä½†ä»¥æ’ä»–æ–¹å¼æ‰“å¼€æ–‡ä»¶ a ä»¥è¿½åŠ æ–¹å¼å†™å…¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºè¯¥æ–‡ä»¶ a+ è¯»å–å¹¶ä»¥è¿½åŠ æ–¹å¼å†™å…¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºè¯¥æ–‡ä»¶ ax ä½œç”¨ä¸â€aâ€ç›¸ä¼¼ã€‚ä½†ä»¥æ’ä»–æ–¹å¼æ‰“å¼€æ–‡ä»¶ ax+ ä½œç”¨ä¸â€a+â€ç›¸ä¼¼ã€‚ä½†ä»¥æ’ä»–æ–¹å¼æ‰“å¼€æ–‡ä»¶","link":"/node.jsä¼ ç»Ÿè¯»å†™æµçš„æ—¶é—´å…ˆåé—®é¢˜/"},{"title":"å‘½ä»¤è¡Œtreeå‘½ä»¤ç”Ÿæˆæ–‡ä»¶æ ‘","text":"ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹æ–‡ä»¶å†…å®¹ä»¥åŠç›¸å…³ç›®å½•ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨æ–‡ä»¶æ ‘è¿›è¡Œæ“ä½œï¼Œåœ¨windowsç³»ç»Ÿä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨treeå‘½ä»¤è¿›è¡Œæ“ä½œï¼š 1tree &gt; list.txt å®ä¾‹å›¾ç‰‡å¦‚ä¸‹ï¼š è¿™æ ·æˆ‘ä»¬å¯ä»¥ç”Ÿæˆkoa-learnè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ç›®å½•ï¼Œè¾“å‡ºç»“æœä¸ºï¼š é‚£ä¹ˆå¯¹äºMac OSæˆ–è€…Linuxç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…treeè¿™ä¸ªç”Ÿæˆæ’ä»¶ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥ï¼šï¼ˆæ²¡æœ‰å®‰è£…brewè¯·å…ˆè¾“å…¥brew installï¼‰ 1brew install tree ç„¶åç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œå› ä¸ºæ˜¯å›½å¤–çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¸‹è½½å¯èƒ½æ¯”è¾ƒæ…¢ã€‚ ç„¶åè¿›å…¥åˆ°æ–‡ä»¶å¤¹ä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š 1tree -a æ¥ç€æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯çœ‹åˆ°å½“å‰çš„ç›®å½•æ ‘ï¼š é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜æœ‰å…¶ä»–çš„å‚æ•°å¯ä»¥è®¾ç½®ï¼š å‘½ä»¤è¡Œ æ•ˆæœ tree -d åªæ˜¾ç¤ºæ–‡ä»¶å¤¹ tree -D æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ tree -L n nè¡¨ç¤ºæ˜¾ç¤ºé¡¹ç›®çš„å±‚çº§ï¼Œn=3å³åªæ˜¾ç¤ºé¡¹ç›®çš„ä¸‰å±‚ç»“æ„ tree -I pattern patternè¡¨ç¤ºæƒ³è¦è¿‡æ»¤çš„ç›®å½•ï¼Œä¾‹å¦‚ tree -I â€œnode_modulesâ€å¯ä»¥è¿‡æ»¤æ‰node_modulesè¿™ä¸ªæ–‡ä»¶å¤¹ æ³¨æ„ï¼Œè¿™é‡Œçš„å‚æ•°-dã€-DåŒºåˆ†å¤§å°å†™ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œå®éªŒã€‚","link":"/å‘½ä»¤è¡Œtreeå‘½ä»¤ç”Ÿæˆæ–‡ä»¶æ ‘/"},{"title":"åŸºäºExpressæ¡†æ¶çš„å›¾ç‰‡å‹ç¼©ä¸Šä¼ ","text":"åœ¨ç½‘ä¸ŠæŸ¥çœ‹äº†å¾ˆå¤šæŠ€æœ¯æ–‡æ¡£ï¼Œä¹Ÿé˜…è¯»äº†Expresså®˜æ–¹çš„æŠ€æœ¯æ–‡æ¡£ï¼Œå¾ˆå¤šåœ¨è¿è¡Œä¸Šéƒ½å¤šå°‘ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥å†³å®šä»Šå¤©æŠŠç¨‹åºä»åˆ›å»ºåˆ°è¿è¡Œå®Œæ•´çš„è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿å‚è€ƒã€‚å…¶ä¸­ç¬¬ä¸‰éƒ¨åˆ†ä½¿ç”¨äº†canvasçš„å›¾ç‰‡å‹ç¼©ï¼Œå¦‚æœä½ åªéœ€è¦å‹ç¼©éƒ¨åˆ†çš„ä»£ç è¯´æ˜ï¼Œå¯ä»¥ç›´æ¥è·³è‡³ç¬¬ä¸‰éƒ¨åˆ†ã€‚ ä¸€ã€è¿è¡Œç¯å¢ƒåŠåŸºæœ¬é…ç½®è¯´æ˜ï¼šâ€‹ phpstorm 2018.1ç‰ˆæœ¬ â€‹ nodejs 8.11.1ç‰ˆæœ¬ â€‹ Express 4.16.0ç‰ˆæœ¬ äºŒã€é¡¹ç›®åˆ›å»ºåŠæ¡†æ¶çš„æ­å»ºâ€‹ é¦–å…ˆæˆ‘ä»¬è¿è¡Œphpstormï¼Œå¹¶create new projectï¼š å› ä¸ºæˆ‘æ˜¯åˆå­¦è€…ï¼Œå¯¹äºnodeçš„æ¨¡æ¿éƒ¨ç½²è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥è¿™é‡Œç”¨äº†é™æ€çš„htmlï¼ˆå…¶å®åæ¥éƒ½æŠŠcsså’Œjså†™åœ¨htmlæ–‡æ¡£é‡Œäº†ï¼Œæ‰€ä»¥è¿™ä¸€éƒ¨åˆ†é»˜è®¤å±æ€§ä¹Ÿä¸ä¼šäº§ç”Ÿå½±å“ï¼‰ é¡¹ç›®åˆ›å»ºå¥½ä¹‹åï¼Œæˆ‘ä»¬ä¸»è¦å¯¹ä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶ï¼šindex.htmlã€app.jsä»¥åŠpackage.jsonè¿›è¡Œæ“ä½œï¼š å› ä¸ºä¸Šä¼ æ–‡ä»¶æˆ‘ä»¬éœ€è¦ç”¨åˆ°expressçš„multerä¸­é—´ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿè¦å…ˆé…ç½®å¥½ï¼ˆé»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼‰ï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥é¡¹ç›®çš„ç›®å½•ä¸­ï¼š ç„¶åè¾“å…¥ï¼š 1npm install express multer --save ç­‰å¾…å®Œæˆï¼š è¿™æ—¶æˆ‘ä»¬å†å»æŸ¥çœ‹é¡¹ç›®çš„package.jsonæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ä¸­é—´ä»¶å·²ç»æ·»åŠ æˆåŠŸï¼š åŸºæœ¬é…ç½®å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä»£ç ä¸Šåœºã€‚ ä¸‰ã€å›¾ç‰‡å‹ç¼©æ¨¡å—ï¼šè¿™ä¸€éƒ¨åˆ†ä¸ç‰µæ‰¯expressæ¡†æ¶æˆ–è€…nodejsï¼Œä¸ºçº¯htmlå’Œjsçš„canvaså›¾ç‰‡å‹ç¼©ï¼Œå¦‚æœä½ åªéœ€è¦åšè¿™ä¸€éƒ¨åˆ†çš„è¯ï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œæ— éœ€å‰ä¸¤éƒ¨åˆ†çš„æ“ä½œã€‚ canvasè¿›è¡Œå›¾ç‰‡å‹ç¼©çš„åŸç†ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†åŸæ¥çš„å›¾ç‰‡è½¬ä¸ºbase64æ ¼å¼çš„ä»£ç ï¼Œç„¶åé‡æ–°ç»˜åˆ¶åœ¨ç”»å¸ƒä¸Šã€‚å…¶å®ä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†ä¸€å¹…å·¨å¤§çš„å£ç”»ï¼Œé‡æ–°copyåœ¨ä¸€å¼ å°çš„ç”»å¸ƒä¸Šï¼Œå¹¶åˆ é™¤ä¸€äº›ç»†èŠ‚çš„è¿‡ç¨‹ã€‚ é‚£ä¹ˆå…ˆä¸Šæˆ‘ä»¬çš„htmlä»£ç ï¼Œè¿™é‡Œæˆ‘æŠŠcssä¹Ÿå†™è¿›å»äº†ï¼ˆè™½ç„¶è¯´å¹¶æ²¡æœ‰ç”¨ä»€ä¹ˆæ ·å¼ï¼‰ï¼š 123456789101112131415161718192021222324&lt;html&gt;&lt;head&gt; &lt;title&gt;photoâ€”â€”compress&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"/stylesheets/style.css\"&gt; &lt;style&gt; #modify_img{ display: block; width: 300px; height: 300px; background-size: 100% 100%; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"img_post\"&gt; &lt;img src=\"images\" alt=\"\" id=\"modify_img\"&gt; &lt;input id=\"file\" type=\"file\" accept=\"image/*\"&gt; &lt;button id=\"upload\"&gt;ä¸Šä¼ &lt;/button&gt; &lt;span id=\"progress\"&gt;0%&lt;/span&gt; &lt;/div&gt;&lt;/body&gt; &lt;/html&gt; ä¸‹é¢æ¥é€ä¸€è¯´æ˜ï¼Œdivé‡Œé¢çš„æ ‡ç­¾ï¼š â€œimgâ€ï¼šå¿…è¦ï¼Œä¸»è¦æ˜¯ä¸ºcanvasç”»å¸ƒå›ºå®šä¸€ä¸ªä½ç½®ï¼Œå®ƒå¿…é¡»è®¾ç½®ä¸ºblockæ˜¾ç¤ºï¼Œ åŒæ—¶è®¾ç½®å®½é«˜ï¼Œå…¶ä¸­çš„background-sizeå±æ€§æ˜¯é˜²æ­¢å›¾ç‰‡æœ¬æ¥å°±å¾ˆå°è€Œæ— æ³•å®Œå…¨å æ»¡æ•´ä¸ªæ¡†é€ æˆæ˜¾ç¤ºé”™è¯¯çš„æƒ…å†µã€‚ â€œinputâ€ï¼šå¿…è¦ï¼Œè®¾ç½®idå’Œinputå±æ€§ï¼ŒåŒæ—¶åªå…è®¸é€‰æ‹©å›¾ç‰‡ç±»å‹æ–‡ä»¶ï¼Œåœ¨ç‚¹å‡»é€‰æ‹©å®Œæ–‡ä»¶åï¼Œä¼šè‡ªåŠ¨åœ¨â€imgâ€ä¸­ç”Ÿæˆå‹ç¼©å¥½çš„å›¾ç‰‡ã€‚ â€œbuttonâ€ï¼šå¿…è¦ï¼ˆå¦‚æœä¸éœ€è¦ä¸Šä¼ åŠŸèƒ½å¯å¿½ç•¥ï¼‰ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥å°†å‹ç¼©å¥½çš„å›¾ç‰‡ä¸Šä¼ è‡³expressæœåŠ¡å™¨ï¼ŒåŒæ—¶æ§åˆ¶å°ä¼šè¿”å›ç›¸å…³ä¿¡æ¯ã€‚ â€œspanâ€ï¼šä¸å¿…è¦ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ˜¾ç¤ºä¸Šä¼ è¿›åº¦ã€‚ æ¥ä¸‹æ¥æ˜¯canvasç»˜å›¾çš„ä»£ç ï¼Œå› ä¸ºå†™çš„æ—¶å€™å·²ç»æ³¨é‡Šå¥½äº†ï¼Œåé¢å°±ä¸å†é€ä¸€èµ˜è¿°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152var getfile = document.querySelector('#file'); //è·å–æ–‡ä»¶ä¸­idä¸ºfileçš„å…ƒç´  var reader = new FileReader(); //FileReaderå¯¹è±¡å…è®¸WEBåº”ç”¨ç¨‹åºå¼‚æ­¥è¯»å–å­˜å‚¨åœ¨ç”¨æˆ·è®¡ç®—æœºä¸Šçš„æ–‡ä»¶ var img = new Image(); //ImageåŠŸèƒ½ç­‰ä»·äº document.createElement('img') var file = null; var canvas = document.createElement('canvas'); var context = canvas.getContext('2d'); //è¿”å›ä¸€ä¸ªç”¨äºåœ¨ç”»å¸ƒä¸Šç»˜å›¾çš„ç¯å¢ƒï¼Œç›®å‰å”¯ä¸€åˆæ³•å€¼ä¸ºâ€œ2dâ€ var newUrl = null;//å¯¹inputç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œå½“å†…å®¹æ”¹å˜æ—¶è§¦å‘ getfile.addEventListener('change', function(event){ file = event.target.files[0]; if ( file.type.indexOf(\"image\") == 0 ){ reader.readAsDataURL(file); } })ï¼› reader.onload = function(e){ //å½“æ–‡ä»¶ä¸Šä¼ å®Œåè§¦å‘ï¼Œä¸»è¦æ˜¯ä¸ºäº†è·å–æºæ–‡ä»¶çš„é•¿å®½ img.src = e.target.result; }; img.onload = function(){ //åœ¨å›¾ç‰‡åŠ è½½å®Œæˆåç«‹å³å‘ç”Ÿ var orgin_width = this.width; var orgin_height = this.height; var max_width = 300; var max_height = 300; var target_width = orgin_width; var target_height= orgin_height; if (orgin_width &gt; max_width || orgin_height &gt; max_height){ //åˆ¤æ–­å›¾åƒæ˜¯å¦å¤§äºé™å®šçš„æœ€å¤§é•¿å®½ if (orgin_width / orgin_height &gt; max_width / max_height){ //ä¸Šä¼ å›¾åƒçš„å®½é«˜æ¯”è¾ƒå¤§ï¼Œä»¥å®½ä¸ºé•¿è½´å¯¹é«˜è¿›è¡Œæ‹‰ä¼¸ target_width = max_width; target_height = Math.round(max_width * ( orgin_height / orgin_width )); //roundï¼ˆï¼‰æ–¹æ³•è¡¨ç¤ºå››èˆäº”å…¥å–æ•´æ•° } else { target_width = Math.round(max_height * ( orgin_width / orgin_height )); //é«˜å®½æ¯”è¾ƒå¤§ï¼Œä»¥é«˜ä¸ºé•¿è½´ï¼Œå¯¹å®½è¿›è¡Œç¼©çŸ­ target_height = max_height; } } canvas.width = target_width; canvas.height = target_height; //å¦‚æœæ˜¯pngè½¬jpgå¦‚æœcanvaså­˜åœ¨é€æ˜åŒºåŸŸï¼Œå®é™…ç»˜åˆ¶å‡ºæ¥ä¼šå˜ä¸ºé»‘è‰²ï¼Œå› ä¸ºcanvasé»˜è®¤ä¸ºrgba(0,0,0,0) //åœ¨è½¬æˆjpgçš„æ—¶å€™å˜æˆäº†rgba(0,0,0,1),è§£å†³åŠæ³•å°±æ˜¯åœ¨ç»˜åˆ¶ä¹‹å‰ä¸ºcanvasé“ºä¸Šä¸€å±‚ç™½è‰²çš„åº•è‰² context.fillStyle = \"#FFF\"; context.fillRect(0, 0, target_width, target_height); //ç»˜åˆ¶å·²å¡«å……çŸ©å½¢ //context.clearRect(0, 0, target_width, target_height); //æ¸…é™¤ç”»å¸ƒå¹¶è®¾ç½®å®½é«˜ context.drawImage(img, 0, 0, target_width, target_height); //ç»˜ç”» newUrl = canvas.toDataURL('image/jpeg', 0.92); //base64 æ ¼å¼ modify_img.style.backgroundImage='url(' + newUrl + ')'; }; è®¾ç½®å¥½åç‚¹å‡»å³ä¸Šè§’çš„chromeè¿›è¡Œæµ‹è¯•: é¡µé¢æ˜¾ç¤ºå¦‚ä¸‹ï¼ˆè¯·æ— è§†é‚£ä¸ªbuttonçš„ä¹±ç ï¼Œè¿‡ä¼šæˆ‘ä»¬ç”¨æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•å°±æ­£å¸¸äº†ï¼‰: ä¸ºäº†æµ‹è¯•ï¼Œæˆ‘é€‰æ‹©äº†ä¸€å¼ 1.3Mçš„ç…§ç‰‡ï¼š ç‚¹å‡»æ‰“å¼€åï¼Œå›¾ç‰‡ä¼šè¿›è¡Œå‹ç¼©ï¼Œç„¶åæ˜¾ç¤ºåœ¨â€imgâ€æ ‡ç­¾é‡Œï¼Œå¯ä»¥æ˜æ˜¾çš„é€šè¿‡å›¾ç‰‡çš„é”¯é½¿æ„Ÿçœ‹å‡ºå›¾ç‰‡å·²ç»è¿›è¡Œäº†å‹ç¼©ï¼š è¿™æ—¶å€™å¦‚æœæˆ‘ä»¬å»æ£€æŸ¥æ–‡æ¡£ï¼Œä¼šå‘ç°å›¾ç‰‡å·²ç»è¢«è½¬ä¸ºäº†base64ç¼–ç ï¼š åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„canvaså·²ç»é¡ºåˆ©å®Œæˆäº†å›¾ç‰‡çš„å‹ç¼©å·¥ä½œï¼Œæ¥ä¸‹æ¥å°±æ˜¯æœåŠ¡å™¨ä¸Šåœºã€‚ å››ã€åˆ©ç”¨Expressçš„multerä¸­é—´ä»¶å®ç°æ–‡ä»¶ä¸æœåŠ¡å™¨çš„äº¤äº’å½“æ—¶åœ¨åšè¿™ä¸€éƒ¨åˆ†çš„æ—¶å€™èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œå› ä¸ºexpress4.xå·²ç»ä¸å†åŒ…æ‹¬body-parserï¼Œéœ€è¦è‡ªå·±è¿›è¡Œç›¸å…³é…ç½®ï¼Œæå¾—å¾ˆå¤´ç—›ã€‚åæ¥å‘ç°åˆ°æœ€æ–°çš„expresså·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†multerè¿™ä¸ªä¸­é—´ä»¶ï¼Œæ–¹ä¾¿äº†ä¸å°‘ï¼Œæ¥ä¸‹æ¥å…ˆä¸Šjsçš„ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738var upload = document.querySelector('#upload'); //ä¸º\"ä¸Šä¼ \"æŒ‰é’®ç»‘å®šå˜é‡ var progress = document.querySelector('#progress'); //ä¸ºè¿›åº¦æ¡ç»‘å®šå˜é‡ var xhr = new XMLHttpRequest(); //å®šä¹‰xhr upload.addEventListener('click', uploadFile, false); //è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶ function uploadFile(event){ function dataURLtoFile(dataurl, filename) { //å°†æˆ‘ä»¬ä¸Šé¢è½¬æ¢çš„base64æ ¼å¼ç¼–ç è½¬ä¸ºæ–‡ä»¶ç±»å‹ var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1], bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n); while(n--){ u8arr[n] = bstr.charCodeAt(n); } return new File([u8arr], filename, {type:mime}); } var file_img = dataURLtoFile(newUrl, file.name); //å®šä¹‰æ–‡ä»¶ç±»å‹çš„å›¾ç‰‡ var formData = new FormData(); //å®šä¹‰formdataçš„å¤„ç†æ–¹æ³• formData.append('test-upload', file_img); //å®šä¹‰å¤„ç†åŸŸä»¥åŠæ–‡ä»¶ä¼ å…¥ xhr.onload = uploadSuccess; //ä¸Šè½½æˆåŠŸçš„è¿”å›å‡½æ•° xhr.upload.onprogress = setProgress; //å¤„ç†è¿›åº¦çš„æ”¾å›å‡½æ•° xhr.open('post', '/upload', true); //ajaxæ•°æ®è¯·æ±‚æ–¹æ³• xhr.send(formData); //ajaxæ•°æ®å‘é€æ–¹æ³• } function uploadSuccess(event){ if(xhr.readyState === 4){ console.log(xhr.responseText); } } function setProgress(event) { if (event.lengthComputable) { var complete = Number.parseInt(event.loaded / event.total * 100); progress.innerHTML = complete + '%'; } } è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ 123...var file_img = dataURLtoFile(newUrl, file.name); //å®šä¹‰æ–‡ä»¶ç±»å‹çš„å›¾ç‰‡... ç¬¬äºŒä¸ªå‚æ•°file.nameä¸­ï¼Œfileä¸ºç¬¬ä¸‰éƒ¨åˆ†ä¸­å®šä¹‰è¿‡çš„fileï¼Œç›®çš„æ˜¯ä¸ºäº†ä¼ å…¥å‹ç¼©è¿‡çš„æ–‡ä»¶åç§°ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¯·å°†dataURLtoFile()å‡½æ•°ä¸€å¹¶ä¿®æ”¹ã€‚ ç„¶åæˆ‘ä»¬éœ€è¦å¯¹expressè¿›è¡Œä¸€äº›é…ç½®ï¼Œåœ¨ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬å·²ç»å¼•å…¥ä¸­é—´ä»¶ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨app.jsä¸­è¿›è¡Œå¼•å…¥ã€‚é¦–å…ˆåœ¨æ–‡ä»¶å¤´å®šä¹‰ä¸Šä¼ å’Œæ–‡ä»¶è¿™ä¸¤ä¸ªå˜é‡ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼Œå¹¶è®¾ç½®å¥½ç«¯å£å·ï¼š(çœç•¥å·ä¹‹é—´çš„ä¸ºæ–°å†™å…¥çš„å†…å®¹ï¼ï¼ï¼) 1234567var logger = require('morgan');//...var upload = require('multer')({ dest: 'uploads/' }); //ä¸Šä¼ å›¾ç‰‡ä¿å­˜çš„æ–‡ä»¶å¤¹ä¸ºuploadsvar fs = require('fs');var port = 8000;//...var indexRouter = require('./routes/index'); æ¥ä¸‹æ¥å®šä¹‰æ–‡ä»¶çš„ä¸Šä¼ è¾“å‡ºä¿¡æ¯ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243app.use('/users', usersRouter);//...app.set('port', port);app.get('*', (req, res) =&gt; { res.redirect('index.html');});app.post('/upload', upload.single('test-upload'), (req, res) =&gt; { // æ²¡æœ‰é™„å¸¦æ–‡ä»¶ if (!req.file) { res.json({ ok: false }); return; } // è¾“å‡ºæ–‡ä»¶ä¿¡æ¯ console.log('===================================================='); console.log('fieldname: ' + req.file.fieldname); console.log('originalname: ' + req.file.originalname); console.log('encoding: ' + req.file.encoding); console.log('mimetype: ' + req.file.mimetype); console.log('size: ' + (req.file.size / 1024).toFixed(2) + 'KB'); console.log('destination: ' + req.file.destination); console.log('filename: ' + req.file.filename); console.log('path: ' + req.file.path); // é‡å‘½åæ–‡ä»¶ let oldPath = path.join(__dirname, req.file.path); let newPath = path.join(__dirname, 'uploads/' + req.file.originalname); fs.rename(oldPath, newPath, (err) =&gt; { if (err) { res.json({ ok: false }); console.log(err); } else { res.json({ ok: true }); } });});app.listen(port, () =&gt; { console.log(\"[Server] localhost:\" + port);});//...module.exports = app; è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ä¸Šä¼ åŠŸèƒ½ä¹Ÿæ­å»ºå®Œæ¯•ã€‚ äº”ã€ç¨‹åºè¿è¡Œï¼šä¸Šè¿°æ“ä½œå…¨éƒ¨å®Œæˆåï¼Œå› ä¸ºç¼–è¯‘å™¨å·²ç»å¸®æˆ‘ä»¬é…å¥½äº†è¿è¡Œç¯å¢ƒï¼ˆçœŸçš„æ˜¯çœäº†ä¸€å¤§æ­¥çš„äº‹ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç‚¹å‡»å³ä¸Šè§’çš„ç»¿è‰²å°ç®­å¤´ï¼š è¿è¡Œï¼š è¿™æ—¶æˆ‘ä»¬çš„æœåŠ¡å™¨å·²ç»å¯åŠ¨äº†ï¼Œæ‰“å¼€chromeï¼Œè¾“å…¥http://localhost:8000/ å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç•Œé¢äº†ï¼Œç„¶åé€‰æ‹©æ–‡ä»¶åç‚¹å‡»ä¸Šä¼ ï¼Œè¿›åº¦æ˜¾ç¤º100%å°±ä»£è¡¨ä¸Šä¼ æˆåŠŸï¼š æ§åˆ¶å°è¿”å›ç»™æˆ‘ä»¬å›¾ç‰‡çš„ç›¸å…³ä¿¡æ¯ï¼š å¯ä»¥çœ‹åˆ°å›¾ç‰‡ä»1.3Må‹ç¼©åˆ°äº†33.33KBï¼ŒåŒæ—¶å­˜æ”¾è·¯å¾„ä¸ºuploadsçš„æ–‡ä»¶å¤¹ï¼› æ¥ä¸‹æ¥åˆ°æˆ‘ä»¬å®šä¹‰å¥½çš„å­˜å›¾ç‰‡çš„åœ°æ–¹ï¼š ç„¶åï¼Œç„¶åå°±å¼€å¿ƒçš„ç©è¿™ä¸ªä¸œè¥¿äº†ï¼ŒğŸ˜ã€‚ å…¶å®expressä¹Ÿå¯ä»¥é€šè¿‡è£å‰ªçš„æ–¹å¼è¿›è¡Œå›¾ç‰‡å‹ç¼©ï¼Œä¸è¿‡é‚£éœ€è¦ç°å°†æºæ–‡ä»¶ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼ˆè¿˜æ˜¯ä¼šæµªè´¹æµé‡ï¼Œè€Œä¸”åŠ è½½é€Ÿåº¦ä¹Ÿä¼šå—å½±å“ï¼‰ï¼›ä½¿ç”¨canvaså…ˆåœ¨æœ¬åœ°è¿›è¡Œå›¾ç‰‡å‹ç¼©ï¼Œç„¶åä¸Šä¼ æœåŠ¡å™¨ï¼Œè¿™æ˜¯ç›®å‰ä¸»æµçš„åšæ³•ã€‚æœ¬é¡¹ç›®éœ€è¦æ³¨æ„çš„ç‚¹åœ¨äºå‹ç¼©å¥½åçš„å›¾ç‰‡åªæ˜¯å­˜åœ¨çš„æ ‡ç­¾ä¸‹ï¼Œè€Œä¸Šä¼ çš„éœ€è¦æ˜¯æ–‡ä»¶ï¼Œè¿™å°±éœ€è¦ç”¨dataURLtoFile()è¿™ä¸€ä¸ªå‡½æ•°å°†å›¾ç‰‡è¿›è¡Œè½¬åŒ–ï¼Œå†å¯¹æ–‡ä»¶è¿›è¡Œä¸Šä¼ ã€‚å¦åˆ™å°†è¿™ä¸€éƒ¨åˆ†ä»£ç æ”¹ä¸ºï¼š 123...formData.append('test-upload', file); ... ä¸Šä¼ çš„ä»ç„¶æ˜¯æœªè¢«å‹ç¼©çš„æºæ–‡ä»¶ã€‚","link":"/åŸºäºExpressæ¡†æ¶çš„å›¾ç‰‡å‹ç¼©ä¸Šä¼ /"},{"title":"å¦‚ä½•åˆ©ç”¨taroæ­å»ºå¾®ä¿¡å°ç¨‹åº","text":"åœ¨å¦‚ä»Šå°ç¨‹åºå¼€å§‹çº¢ç«çš„å¹´ä»£ï¼Œæ¯ä¸ªäº’è”ç½‘å…¬å¸ä¸å¾—ä¸é¢å¯¹å®¢æˆ·ç«¯å¼€å‘ã€webå‰ç«¯å¼€å‘ã€å°ç¨‹åºå¼€å‘ä¸‰æ¡å¼€å‘çº¿è·¯ã€‚ä¸ºäº†åº”å¯¹å¦‚æ­¤å¤§çš„å¼€å‘æˆæœ¬ï¼Œå„ç§ç¼–è¯‘æ¡†æ¶åº”è¿è€Œç”Ÿï¼Œtaro é¦–å…ˆæ˜¯æ•°æ®åº“å»ºè®¾ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨MySQLWorkbenchæ¥å»ºè¡¨ï¼Œå½“ç„¶æœ€ç®€å•çš„è¿˜æ˜¯sqlè¯­å¥ç”Ÿæˆï¼Œè¿™é‡Œæˆ‘ä»¬å»ºç«‹Userç”¨æˆ·è¡¨ï¼Œå…¶ä¸­åŒ…æ‹¬","link":"/å¦‚ä½•åˆ©ç”¨taroæ­å»ºå¾®ä¿¡å°ç¨‹åº/"},{"title":"å¦‚ä½•åœ¨EC2ä¸Šéƒ¨ç½²webpackæ‰“åŒ…é¡¹ç›®","text":"æœ¬ç¯‡ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š EC2çš„ç”³è¯·ä¸é…ç½®æ³¨æ„ ubuntuæœåŠ¡å™¨ç›¸å…³é…ç½® nginxçš„é…ç½®åŠåŸŸåè®¿é—® é¡¹ç›®çš„æ•´ä½“é…ç½®åŠç‰ˆæœ¬ï¼š æœåŠ¡å™¨ç±»å‹ï¼šAWS EC2æœåŠ¡å™¨ æœåŠ¡å™¨ç³»ç»Ÿï¼šUbuntu 18.04 nvmç‰ˆæœ¬ï¼š0.33.2 nodeç‰ˆæœ¬ï¼š11.13.0 npmç‰ˆæœ¬ï¼š6.7.0 vueç‰ˆæœ¬ï¼š2.9.6 nginxç‰ˆæœ¬ï¼š1.14.0 (Ubuntu) gitç‰ˆæœ¬ï¼š2.21.0 EC2çš„ç”³è¯·ä¸é…ç½®æ³¨æ„é¦–å…ˆä½ å¿…é¡»æœ‰ä¸€ä¸ªäºšé©¬é€Šè´¦æˆ·ï¼Œè¿›å…¥AWSçš„æ§åˆ¶é¢æ¿ï¼Œé€šè¿‡æœåŠ¡/è®¡ç®—/EC2è¿›å…¥åˆ°ä¸‹ä¸€å±‚çš„æ§åˆ¶é¢æ¿ä¸­ï¼Œç„¶åç‚¹é€‰å¯åŠ¨å®ä¾‹ï¼Œé€‰æ‹©æœåŠ¡å™¨çš„ç›¸å…³é…ç½®ç­‰ç­‰ã€‚ åœ¨è¿™ä¸€äº›æ“ä½œåï¼Œä½ éœ€è¦æ–°å»ºä¸€ä¸ªå®‰å…¨ç»„æ¥å…è®¸ä½ ä»è¿œç¨‹è®¿é—®ã€‚å…³äºå®‰å…¨ç»„çš„é…ç½®ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾ï¼š 80ç«¯å£å’Œ8080ç«¯å£å¼€å‘ç”¨äºè®©æˆ‘ä»¬é€šè¿‡åŸŸåæˆ–IPåœ°å€è®¿é—®æˆ‘ä»¬çš„ç«™ç‚¹ï¼Œ22ç«¯å£ç”¨äºæˆ‘ä»¬é€šè¿‡SSHæ¥é“¾æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œè¿›è¡Œç›¸å…³çš„é…ç½®ã€‚ å‡ºç«™è§„åˆ™è®¾ç½®æˆå…¨éƒ¨ç«¯å£ï¼Œä»»æ„IPå‡å¯è®¿é—®å³å¯ã€‚ å…¨éƒ¨å®Œæˆåï¼Œå°±å¯ä»¥åœ¨å®ä¾‹ä¸­çœ‹åˆ°æˆ‘ä»¬éƒ¨ç½²å¥½çš„æœåŠ¡å™¨ï¼Œç±»ä¼¼ç¬¬ä¸€å¼ å›¾ï¼Œç‚¹å‡»æˆ‘ä»¬åˆšéƒ¨ç½²å¥½çš„æœåŠ¡å™¨ï¼Œå¯ä»¥çœ‹åˆ°æœåŠ¡å™¨çš„ipåœ°å€ï¼ˆçº¢æ¡†å†…å®¹ï¼‰ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ipæ¥è¿›è¡Œè®¿é—®ï¼Œä¹Ÿç”¨äºæˆ‘ä»¬æœ€åè¦é…ç½®çš„åŸŸåè§£æï¼š å†ç‚¹å‡»â€œè¿æ¥â€æŒ‰é’®ï¼Œä¼šç»™æˆ‘ä»¬è¿æ¥æ‰€éœ€çš„ç›¸å…³ä¿¡æ¯ï¼š å…¶ä¸­ å…¬æœ‰DNS ä¾¿æ˜¯æˆ‘ä»¬è¿æ¥çš„ä¸»æœºï¼Œé»˜è®¤ç«¯å£å·ä¸º22ï¼Œæ¥ä¸‹æ¥å¯ä»¥ä½¿ç”¨åˆé€‚çš„SSHå®¢æˆ·ç«¯æ¥é“¾æ¥è¿œç¨‹ä¸»æœºã€‚ Macï¼šFinalShell Windowsï¼šXshell æ¥ä¸‹æ¥ä»¥FinalShellä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥é“¾æ¥è¿œç¨‹æœåŠ¡å™¨ï¼š ç„¶åç‚¹å‡»æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©sshé“¾æ¥ï¼š ç„¶åå¡«å†™é“¾æ¥ç›¸å…³ä¿¡æ¯ï¼š åç§°éšæ„ï¼Œä¸»æœºå³ä¸ºåˆšæ‰çš„ å…¬æœ‰DNS è®¤è¯æ–¹å¼é€‰æ‹©å…¬é’¥è®¤è¯ï¼Œç”¨æˆ·åå¡«å†™ ubuntu ï¼Œç§é’¥å³ä¸ºåˆšæ‰åˆ›å»ºå®ä¾‹æ‰€ä¿å­˜çš„ .pem æ–‡ä»¶ï¼Œå…¨éƒ¨å¡«å†™å®Œæ¯•åç‚¹å‡»ç¡®å®šï¼Œå³å¯é“¾æ¥è¿œç¨‹æœåŠ¡å™¨ã€‚ ubuntuæœåŠ¡å™¨ç›¸å…³é…ç½®123~$: sudo apt install curl~$: curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash(æ‰§è¡Œå®Œè¿™ä¸€æ­¥åéœ€è¦é‡å¯shellï¼Œç›´æ¥æŠŠå½“å‰shellå…³é—­å†é‡æ–°è¿›å…¥å°±å¥½äº†ï¼Œå¦åˆ™nvmå‘½ä»¤æ— æ³•æ‰¾åˆ°) 1234567891011121314~$: nvm --version // æŸ¥çœ‹nvmç‰ˆæœ¬~$: nvm ls-remote // æŸ¥çœ‹nodeç‰ˆæœ¬~$: nvm install v11.13.0 // ä¸‹è½½æŒ‡å®šnodeç‰ˆæœ¬~$: node --version~$: npm --version (nodeç›¸å…³é…ç½®å®Œæ¯•)~$: npm install -g vue-cli(vueç›¸å…³é…ç½®å®Œæ¯•)~$: sudo add-apt-repository ppa:git-core/ppa // éƒ¨ç½²å›½å†…æœåŠ¡å™¨å¯ä»¥ä¸åšè¿™ä¸€æ­¥~$: sudo apt-get update~$: sudo apt-get install git(gitç›¸å…³é…ç½®å®Œæ¯•)~$: sudo apt-get install nginx(nginxå®‰è£…å®Œæ¯•) æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æŠŠé¡¹ç›®cloneåˆ°æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥å€ŸåŠ©githubæ¥å®Œæˆè¿™ä¸€æ­¥ï¼Œå½“ç„¶æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ä½¿ç”¨webstormçš„deploymentæ¥å®Œæˆè¿™ä¸€æ­¥ã€‚ 123~$: git clone https://github.com/[xxxx]/[projectName].git~/[projectName]$: cd [projectName] &amp;&amp; npm install~/[projectName]$: npm run build ä¸Šè¿°æ“ä½œå®Œæˆåï¼Œæˆ‘ä»¬çš„é¡¹ç›®å·²ç»å®Œæˆäº†æ‰“åŒ…å¹¶å­˜æ”¾åœ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šäº†ï¼Œè¿™æ˜¯å…¶å®å¯ä»¥é€šè¿‡ run dev ç„¶åä½¿ç”¨å…±æœ‰ ip + ç«¯å£å·è®¿é—®äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä½¿ç”¨nginxå®ç°åŸŸåçš„è®¿é—®ã€‚ nginxçš„é…ç½®åŠåŸŸåè®¿é—®é¦–å…ˆæˆ‘ä»¬å‡†å¤‡å¥½åŸŸåï¼Œå»é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘ä¸Šæä¸€ä¸ªåŸŸåï¼Œå…¨éƒ¨å®¡æ‰¹å®Œåï¼Œç‚¹å‡»åŸŸåè§£æï¼š ç„¶åç‚¹å‡»æ–°æ‰‹å¼•å¯¼æ¥æ·»åŠ æœåŠ¡å™¨çš„ipåœ°å€ï¼ˆä¹‹å‰æˆ‘ä»¬ä¿å­˜çš„æœåŠ¡å™¨å…¬æœ‰IPï¼‰ï¼Œä¿å­˜ç¡®è®¤å³å¯ï¼š æå®šå¥½è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬å›åˆ°SSHä¸Šå®Œæˆnginxä»£ç†ã€‚ä¹‹å‰æˆ‘ä»¬å·²ç»å®‰è£…å¥½äº†nginxï¼Œæ¥ä¸‹æ¥è¿›è¡Œnginxçš„é…ç½®ï¼š 12~$: cd /etc/nginx/etc/nginx$: sudo vim nginx.conf ç„¶åä¿®æ”¹ç›¸å…³é…ç½®ï¼š 123456789101112http { ... server { listen 80; server_name xxx.cn; location / { root /home/ubuntu/[projectName]/dist; index index.html; } }} ç„¶åæŒ‰ä¸‹escï¼Œè¾“å…¥ :wq ä¿å­˜é€€å‡ºï¼Œ æ¥ç€åœ¨ç»ˆç«¯ä¸­é‡å¯nginxï¼š 1/etc/nginx$: sudo service nginx restart è¿™æ ·æˆ‘ä»¬æœåŠ¡å™¨ç«¯å°±å…¨éƒ¨é…ç½®å®Œæˆäº†ï¼Œå¯ä»¥æ„‰å¿«çš„é€šè¿‡åŸŸåæ¥è®¿é—®äº†ã€‚","link":"/å¦‚ä½•åœ¨EC2ä¸Šéƒ¨ç½²webpackæ‰“åŒ…é¡¹ç›®/"}],"tags":[{"name":"çŸ¥è¯†å­¦ä¹ ","slug":"çŸ¥è¯†å­¦ä¹ ","link":"/tags/çŸ¥è¯†å­¦ä¹ /"},{"name":"é¡¹ç›®å®æˆ˜","slug":"é¡¹ç›®å®æˆ˜","link":"/tags/é¡¹ç›®å®æˆ˜/"},{"name":"é”™è¯¯æ€»ç»“","slug":"é”™è¯¯æ€»ç»“","link":"/tags/é”™è¯¯æ€»ç»“/"},{"name":"å°æŠ€å·§","slug":"å°æŠ€å·§","link":"/tags/å°æŠ€å·§/"}],"categories":[{"name":"Antlr4","slug":"Antlr4","link":"/categories/Antlr4/"},{"name":"Go","slug":"Go","link":"/categories/Go/"},{"name":"Python","slug":"Python","link":"/categories/Python/"},{"name":"HTTP","slug":"HTTP","link":"/categories/HTTP/"},{"name":"JS","slug":"JS","link":"/categories/JS/"},{"name":"Koa","slug":"Koa","link":"/categories/Koa/"},{"name":"NodeJs","slug":"NodeJs","link":"/categories/NodeJs/"},{"name":"Bash/cmd","slug":"Bash-cmd","link":"/categories/Bash-cmd/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","link":"/categories/å¾®ä¿¡å°ç¨‹åº/"},{"name":"å¯†ç å­¦","slug":"å¯†ç å­¦","link":"/categories/å¯†ç å­¦/"},{"name":"Node","slug":"Node","link":"/categories/Node/"}]}